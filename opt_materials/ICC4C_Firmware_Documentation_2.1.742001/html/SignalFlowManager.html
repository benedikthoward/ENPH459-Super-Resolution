<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="shortcut icon" href="adara_icon.png" type="image/x-icon" />
<title>ICC4C: Signal Flow Manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://www.optotune.com/" target="_blank"><img alt="Logo" src="optotune_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ICC4C
   &#160;<span id="projectnumber">143-525-00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Signal Flow Manager </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Signal Flow Manager system Id: <b>0x40</b> </p>
<p ><br  />
 Signal flow manager is a system in charge of setting up and managing she <a class="el" href="signalflow.html">signal flow</a> execution. <br  />
 The Signal Flow Manager is providing registers to set up signal flow systems for each stage. <br  />
 Signal flow stage register addresses depends on the index of signal flow path, signal flow stage and the index of the channel. <br  />
 Setup of signal flow assumes providing register address and the stage system id, which has to be engages within particular stage. <br  />
 Stage register evaluation uses following formula:</p>
<p ><picture><source srcset="form_3_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ reg\_idx = path\_idx \times (STAGE\_NBR \times CHANNEL\_NBR) + channel\_idx \times STAGE\_NBR + stage\_idx $" src="form_3.png" width="599" height="39"/></picture></p>
<p >where <br  />
 <em>STAGE_NBR</em> = 5 <br  />
 <em>CHANNEL_NBR</em> = 4</p>
<p >The signal flow consists of three signal flow paths </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Signal Flow Path   </th><th class="markdownTableHeadNone">Index    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Main flow   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Feed forward   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Feedback   </td><td class="markdownTableBodyNone">2   </td></tr>
</table>
<p >and five stages.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Signal Flow Stage   </th><th class="markdownTableHeadNone">Index    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Input stage   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Input conditioning stage   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Control stage   </td><td class="markdownTableBodyNone">2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Output conditioning stage   </td><td class="markdownTableBodyNone">3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Output stage   </td><td class="markdownTableBodyNone">4   </td></tr>
</table>
<h3>Register Map:</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Address   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Default Value   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Access    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4000   </td><td class="markdownTableBodyNone">Main flow stages base   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">System ID is expected   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x40xx   </td><td class="markdownTableBodyNone">MF base + 5x channel index + stage index   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">System ID is expected   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4014   </td><td class="markdownTableBodyNone">Feed forward stages base   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">System ID is expected   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x40xx   </td><td class="markdownTableBodyNone">FF base + 5x channel index + stage index   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">System ID is expected   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4028   </td><td class="markdownTableBodyNone">Feedback stages base   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">System ID is expected   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x40xx   </td><td class="markdownTableBodyNone">FB base + 5x channel index + stage index   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">System ID is expected   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4048   </td><td class="markdownTableBodyNone">Main input to feed forward path   </td><td class="markdownTableBodyNone">0x0   </td><td class="markdownTableBodyNone">Directs main flow input to feed forward input conditioning stage,<br  />
 mask of applied channels   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x404F   </td><td class="markdownTableBodyNone">Signal flow default setting   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Restore default signal flow, i.e. main flow only   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">write only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4050   </td><td class="markdownTableBodyNone">Main flow stages output base   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Stage output value   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x40xx   </td><td class="markdownTableBodyNone">MF output base + 5x channel index + stage index   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Stage output value   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4064   </td><td class="markdownTableBodyNone">Feed forward stages output base   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Stage output value   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x40xx   </td><td class="markdownTableBodyNone">FF output base + 5x channel index + stage index   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Stage output value   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x4078   </td><td class="markdownTableBodyNone">Feedback stages output base   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Stage output value   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x40xx   </td><td class="markdownTableBodyNone">FB output base + 5x channel index + stage index   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">Stage output value   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only   </td></tr>
</table>
<h3>Default signal flow</h3>
<p >After driver's initialisation signal flow manager setups default signal flow.<br  />
This default setting engages only main flow path to enable simple open loop current control. </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Signal flow stage   </th><th class="markdownTableHeadNone">SysReg. [channel]   </th><th class="markdownTableHeadNone">stage system id [channel]   </th><th class="markdownTableHeadNone">Engaged stage system    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">stage 0   </td><td class="markdownTableBodyNone">0x40[00-03]   </td><td class="markdownTableBodyNone">0x5[0-3]   </td><td class="markdownTableBodyNone"><a class="el" href="StaticInput.html">Static input</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">stage 1   </td><td class="markdownTableBodyNone">0x40[04-07]   </td><td class="markdownTableBodyNone">0x9[8-B]   </td><td class="markdownTableBodyNone"><a class="el" href="InputConditioning.html">Input conditioning</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">stage 2   </td><td class="markdownTableBodyNone">0x40[08-0B]   </td><td class="markdownTableBodyNone">0xB[0-3]   </td><td class="markdownTableBodyNone"><a class="el" href="FeedThrough.html">Open loop</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">stage 3   </td><td class="markdownTableBodyNone">0x40[0C-0F]   </td><td class="markdownTableBodyNone">0xD[0-3]   </td><td class="markdownTableBodyNone"><a class="el" href="OutputConditioning.html">Output conditioning </a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">stage 4   </td><td class="markdownTableBodyNone">0x40[10-13]   </td><td class="markdownTableBodyNone">0xE[8-B]   </td><td class="markdownTableBodyNone"><a class="el" href="LinearOutput.html">Linear output</a>   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Default signal flow may vary depending on detected device type or specific application. </dd>
<dd>
</dd></dl>
<h3>Examples:</h3>
<p >To activate the signal generator system for channel two, set to register with address 0x4005 the value 0x61.</p>
<p >To activate the calibrated PID system of channel one, set to register with address 0x4002 the value 0xC0.</p>
<p >To redirect feed forward input stage to the calibrated PID system of channel four, set to register with address 0x4048 the mask value 0x08. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr class="footer"/><address class="footer"><small>
<a href="https://www.optotune.com/" target="_blank">Optotune. All rights reserved. 
</a>
</small></address>
</body>
</html>
