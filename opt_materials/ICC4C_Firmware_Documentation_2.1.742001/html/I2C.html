<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="shortcut icon" href="adara_icon.png" type="image/x-icon" />
<title>ICC4C: I2C</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://www.optotune.com/" target="_blank"><img alt="Logo" src="optotune_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ICC4C
   &#160;<span id="projectnumber">143-525-00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">I2C </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >I2C system ID: <b>0x31</b> </p>
<p >I2C slave driver which supports only raw I2C read/write frames. SMBus frames are not supported. Speed clock capability of driver is up to 400kHz with 100ns rise time and 10ns fall time. The driver supports reception and transmission of 12 data byte frames only (13 bytes with the address byte in total).</p>
<p >Master has the possibility to read/write two system registers. However, all 12 data bytes have to be clocked by the master even if one system register needs to be manipulated. If a different size of data frame other than 12 is sent, data will be corrupted until receive buffer of slave is fully flushed.</p>
<p >Two types of commands are supported.</p>
<p >1 - Write Command<br  />
 a. Type of command which need an action from slave without send any specific answer.<br  />
 b. I2C sequence is composed like that :</p>
<p >|_START_|_Slave_Address_|_Wr_|_A_|_SYS_ID_1_|_A_|_REG_ID_1_|_A_|_VALUE_1_BYTE_1_|_A_|_VALUE_1_BYTE_2_|_A_|_VALUE_1_BYTE_3_|_A_|....</p>
<p >|_VALUE_1_BYTE_4_|_A_|_SYS_ID_2_|_A_|_REG_ID_2_|_A_|_VALUE_2_BYTE_1_|_A_|_VALUE_2_BYTE_2_|_A_|_VALUE_2_BYTE_3_|_A_|_VALUE_2_BYTE_4_|_A_|_STOP_|</p>
<p >All write capable registers can be written through I2C. Received frame is executed right after reception. If all bytes are acknowledged, this means that they are successfully received. If master needs to validate that the system registers were written successfully, he needs to read the local I2C system registers 0x03 and 0x04 (see Table below). They are always updated with the error code results from the I2C write execution system registers 1 and 2.</p>
<p >2- Request Command<br  />
 a. Type of command which need a specific data answer from Slave Device.<br  />
 b. I2C sequence is composed like that :</p>
<p >|_START_|_Slave_Address_|_Rr_|_A_|_SYS_ID_1_|_A_|_REG_ID_1_|_A_|_VALUE_1_BYTE_1_|_A_|_VALUE_1_BYTE_2_|_A_|_VALUE_1_BYTE_3_|_A_|....</p>
<p >|_VALUE_1_BYTE_4_|_A_|_SYS_ID_2_|_A_|_REG_ID_2_|_A_|_VALUE_2_BYTE_1_|_A_|_VALUE_2_BYTE_2_|_A_|_VALUE_2_BYTE_3_|_A_|_VALUE_2_BYTE_4_|_~A_|_STOP_|</p>
<p >Since the repeated start condition is not supported, I2C system has two internal registers whose value points to the address of system register 1 and 2 to be read. The values of the registers to be transmitted, are updated at the control frequency. If Master reads faster than the control frequency the same value shall be transmitted until the transmit register is updated.</p>
<p >If read command fails, 0x7cf0bdc2 will be given as answer.</p>
<p >For example, Master wants to read Capacitive Feedback registers of A and B channels. He has to first issue a write command and write to the I2C internal pointer registers (0x3100 and 0x3101) the values 0x2901 and 0x2902 respectively (address of capacitive feedback registers A and B). After that, internal pointer registers of the I2C system point to the Capacitive Feedback registers. Now Master has to initiate a read command to get the capacitive feedback values. I2C transmit buffer will be updated at ever control cycle. Master does not need to issue an other write command as long as he wants to read the capacitive feedback. Only when the pointer registers need to be updated Master has to issue an other write command.</p>
<p >Register values are transmitted with MSB first.</p>
<h3>Register map:</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Address   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Default Value   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Access    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x3100   </td><td class="markdownTableBodyNone">I2C read pointer 0   </td><td class="markdownTableBodyNone">0x1003   </td><td class="markdownTableBodyNone">The address of the register that will be used to evaluate the first register in the read request<br  />
 Value is updated at controller frequency.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x3101   </td><td class="markdownTableBodyNone">I2C read pointer 1   </td><td class="markdownTableBodyNone">0x1004   </td><td class="markdownTableBodyNone">The address of the register that will be used to evaluate the second register in the read request<br  />
 Value is updated at controller frequency.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read write    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x3102   </td><td class="markdownTableBodyNone">I2C read pointer 2   </td><td class="markdownTableBodyNone">0x1003   </td><td class="markdownTableBodyNone">The address of the register that will be used to evaluate the first register in the read request<br  />
 Value is updated at controller frequency.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x3103   </td><td class="markdownTableBodyNone">I2C read pointer 3   </td><td class="markdownTableBodyNone">0x1004   </td><td class="markdownTableBodyNone">The address of the register that will be used to evaluate the second register in the read request<br  />
 Value is updated at controller frequency.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read write    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x3104   </td><td class="markdownTableBodyNone">Write error response 0   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Error response of the first register of the write request.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x3105   </td><td class="markdownTableBodyNone">Write error response 1   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Error response of the second register of the write request.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x3106   </td><td class="markdownTableBodyNone">Write error response 2   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Error response of the third register of the write request.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x3107   </td><td class="markdownTableBodyNone">Write error response 3   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Error response of the forth register of the write request.   </td><td class="markdownTableBodyNone">uint32   </td><td class="markdownTableBodyNone">read only   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr class="footer"/><address class="footer"><small>
<a href="https://www.optotune.com/" target="_blank">Optotune. All rights reserved. 
</a>
</small></address>
</body>
</html>
