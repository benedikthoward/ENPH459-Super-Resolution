<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="shortcut icon" href="adara_icon.png" type="image/x-icon" />
<title>ICC4C: Smart Step Manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://www.optotune.com/" target="_blank"><img alt="Logo" src="optotune_logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ICC4C
   &#160;<span id="projectnumber">143-525-00</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Smart Step Manager </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Smart Step Manager ID: <b>0x3A</b> <br  />
 <br  />
 Smart step manager is a system in charge of managing lenses devices capable of smart step feature. <br  />
 The Smart step feature is represented by temperature dependent expertly defined sets of data applying to lens control. <br  />
 Smart step manager is capable to manage up to four lens devices, i.e. devices occupying particular ICC driver channel. <br  />
 Manager closely cooperates with <a class="el" href="DeviceEEPROM.html">Device EEPROM</a>, which provides expert data sets, either from lens EEPROM or drivers ROM <br  />
 and <a class="el" href="OutputConditioningFilter.html">Input/Output Conditioning Filter</a> stage, in charge of smart step control, which is applying provided expert data. <br  />
 It is observing each device temperature and preparing particular coefficients set for smart step control.</p>
<p >Main managers features:</p><ul>
<li>initializing managed device status, on SS capable device connection</li>
<li>watching actual device temperature</li>
<li>preparing particular set of coefficients to apply</li>
<li>deinitializing managed device status, on SS capable device disconnection</li>
</ul>
<h3>Uploading filter coefficient sets from driver - for data verification purpose</h3>
<p >Uploading actual filter coefficients set within firmware is possible when smart step feature capable device is connected and its EEPROM is correctly parsed:</p><ul>
<li>set register:<ul>
<li><b><code>TempSeriesIndex</code> -</b> with index of requested temperature set, actual number depends on particular device</li>
</ul>
</li>
<li>set register:<ul>
<li><b><code>SeriesFilterIndex</code> -</b> with index of requested filter set</li>
</ul>
</li>
<li>get vector: <sup>1), 2)</sup><ul>
<li><b><code>inCoeffDataVector</code> -</b> getting smart step data set of filter input sample coefficients</li>
</ul>
</li>
<li>get vector: <sup>1), 2)</sup><ul>
<li><b><code>outCoeffDataVector</code> -</b> getting smart step data set of filter output sample coefficients</li>
</ul>
</li>
</ul>
<p><b>Note:</b> Getting smart step data from non-active smart step device is not possible.</p>
<p ><br  />
 <b>Remark:</b> <br  />
 <sup>1)</sup> one vector is limited to 10 coefficient values <br  />
 <sup>2)</sup> max addressable coefficient number is 9, i.e 10 coefficient items in total, counting from zero</p>
<h3>Register Map:</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Address   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Access    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x[SysId][00-03]   </td><td class="markdownTableBodyNone">MngDeviceIsActive   </td><td class="markdownTableBodyNone">1(*see note 1)   </td><td class="markdownTableBodyNone">device on channel (0-3) is managed, SmartStep is active   </td><td class="markdownTableBodyNone">bool   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x[SysId][04-07]   </td><td class="markdownTableBodyNone">MngFiltersMsk   </td><td class="markdownTableBodyNone">0xC   </td><td class="markdownTableBodyNone">mask of managed filters   </td><td class="markdownTableBodyNone">uint8   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x[SysId][08-0B]   </td><td class="markdownTableBodyNone">TempSeriesIndex   </td><td class="markdownTableBodyNone">*see note 2   </td><td class="markdownTableBodyNone">reading register returns actual temperature series index <br  />
writing to register sets index of temperature series for getting its temperature value or coeffs using appropriate vector reading   </td><td class="markdownTableBodyNone">uint8   </td><td class="markdownTableBodyNone">read/write    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x[SysId][0C-0F]   </td><td class="markdownTableBodyNone">TempSeriesValue   </td><td class="markdownTableBodyNone">*see note 2   </td><td class="markdownTableBodyNone">get temperature series value   </td><td class="markdownTableBodyNone">uint8   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x[SysId][10-13]   </td><td class="markdownTableBodyNone">SeriesFilterIdx   </td><td class="markdownTableBodyNone">*see note 2   </td><td class="markdownTableBodyNone">select series data filter index   </td><td class="markdownTableBodyNone">uint8   </td><td class="markdownTableBodyNone">read/write   </td></tr>
</table>
<p ><b>Note</b> 1: if SmartStep feature is supported for connected lens (EL1640, EL1230, EL0720) it is enabled by default.</p>
<p ><b>Note</b> 2: value depends on actual device temperature</p>
<h3>Vector Map:</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Address   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Access    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0x[SysId][00-03]   </td><td class="markdownTableBodyNone">inCoeffDataVector   </td><td class="markdownTableBodyNone">0.0   </td><td class="markdownTableBodyNone">input coeffs from selected temp series, filter   </td><td class="markdownTableBodyNone">float array   </td><td class="markdownTableBodyNone">read only    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">0x[SysId][04-07]   </td><td class="markdownTableBodyNone">outCoeffDataVector   </td><td class="markdownTableBodyNone">0.0   </td><td class="markdownTableBodyNone">output coeffs from selected temp series, filter   </td><td class="markdownTableBodyNone">float array   </td><td class="markdownTableBodyNone">read only   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr class="footer"/><address class="footer"><small>
<a href="https://www.optotune.com/" target="_blank">Optotune. All rights reserved. 
</a>
</small></address>
</body>
</html>
